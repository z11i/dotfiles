[core]
	excludesfile = ~/.config/git/gitignore_global

[include]
	path = ~/.config/git/gitalias/gitalias.txt
	path = ~/.gitlocal
	path = ~/.config/git/delta_theme

[alias]
	c = commit -v
    # diff two patches
    diff-patches = "!bash -c 'diff <(git show $0) <(git show $1)'"
    dt = "!bash -c 'GIT_EXTERNAL_DIFF=difft git diff'"
    f = fetch --prune
	ff = merge --ff-only
    forget-file = "!bash -c 'git rm --cached $0 && git update-index --assume-unchanged $0'"
    forget-dir = "!bash -c 'git rm -r --cached $0 && git update-index --assume-unchanged $0'"
	ri = rebase --interactive
    sw = switch
    test-merge = merge --no-commit --no-ff
    wt = worktree
    find-merge = "!bash -c 'commit=$0 && branch=${1:-HEAD} && (git rev-list $commit..$branch --ancestry-path | cat -n; git rev-list $commit..$branch --first-parent | cat -n) | sort -k2 -s | uniq -f1 -d | sort -n | tail -1 | cut -f2'"
    show-merge = "!bash -c 'merge=$(git find-merge $0 $1) && [ -n \"$merge\" ] && git show $merge'"


[core]
    pager = delta

    ## highlight whitespaces
    ## https://github.com/dandavison/delta/issues/522
    # pager = sed 's/\t/â‡¥/g' | delta

[diff]
    tool = difftastic

[difftool]
    prompt = false

[difftool "difftastic"]
    cmd = difft "$LOCAL" "$REMOTE"

[delta]
    features = line-numbers decorations side-by-side

[merge] # delta to show diffs between commits on merge conflicts
    conflictstyle = diff3

[interactive]
    diffFilter = delta --color-only --features=interactive

[color]
	ui = true

[credential]
	helper = store

[diff]
    algorithm = histogram
[init]
	defaultBranch = main
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
